@keyframes correctAnswer {
    0% {
        background: #0c0;
    }
    100% {
        background: var(--bg);
    }
}
@keyframes fadeInWithDelay {
    0% {
        opacity: 0;
    }
    50% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}

.study-game {
    --bg: #ccc;
    aspect-ratio: 16 / 9;
    background: var(--bg);
    border-radius: 20px;
    margin-top: 0;
    user-select: none;
    transition: background-color 0.2s ease-in-out;
    position: relative;
    font-size: 18px;
}

@media (max-width: 800px) {
    .study-game {
        aspect-ratio: unset;
        height: 70vh;
    }
}

.study-game:before {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    box-shadow: inset 0 0 40px #0003;
    border-radius: inherit;
    content: '';
}

.study-game:fullscreen {
    font-size: 3vmin;
}

.study-game:fullscreen:before {
    box-shadow: inset 0 0 10vmin #0008;
}

.study-game:after {
    position: absolute;
    top: 10px;
    left: 10px;
}

.study-game[timer]:after {
    content: "Penalty: " attr(timer) "s";
}
.study-game.can-proceed:after {
    content: "Tap anywhere, or press SPACE";
    animation: fadeInWithDelay 5s ease-in-out;
}
.study-game.can-proceed {
    cursor: pointer;
}

.study-game .question, .study-game .answers {
    aspect-ratio: 32 / 9;
    width: 100%;
    height: 50%;
}

.study-game .question {
    display: flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    padding: 10px 40px;
    overflow-y: auto;
}

.study-game .answers {
    display: flex;
    flex-direction: column;
    --gaps: 10px;
}

.study-game .answers .row {
    display: flex;
    height: 100%;
    padding: 0 var(--gaps);
    padding-bottom: var(--gaps);
    gap: var(--gaps);
    box-sizing: border-box;
    height: 50%;
}

.study-game .answers .answer-button {
    width: 100%;
    height: 100%;
    cursor: pointer;
    box-sizing: border-box;
    border: 1px solid #0002;
    border-radius: 10px;
    padding: 8px;
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-evenly;
    text-align: center;
    background: #0002;
    text-shadow: 0 1px 0 gray;
    transition: background-color 0.5s ease-in-out;
    box-shadow: inset 0 10px 10px #fff8, 0 2px 5px #0003;
    overflow-y: auto;
}

.study-game:fullscreen .answers .answer-button {
    border-radius: 3vmin;
}

.study-game .answers .answer-button.chosen-correct {
    transition: none;
}
.study-game .answers .answer-button:is(.chosen-correct, .not-chosen-correct) {
    background-color: #0808;
}
.study-game:has(.answer-button.not-chosen-correct) {
    background-color: #f88;
}
.study-game .answers .answer-button.chosen-incorrect {
    background-color: #f008;
}

.study-game:has(.answer-button.not-chosen-correct, .answer-button.chosen-correct) .answer-button {
    pointer-events: none;
}

.study-game .statistics {
    position: absolute;
    right: 20px;
    top: 20px;
    white-space: pre-line;
    color: #0009;
    text-align: right;
    z-index: 1000;
}

.study-game .question-wrapper {
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%;
    position: absolute;
    left: 0;
    top: 0;
}